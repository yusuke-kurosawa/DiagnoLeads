name: Product Management Droid
description: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã¨ãƒªãƒªãƒ¼ã‚¹ç®¡ç†ã‚’çµ±åˆçš„ã«ã‚µãƒãƒ¼ãƒˆ
version: 1.0.0

triggers:
  commands:
    - /product-check
    - /release-ready
    - /qa-full
    - /product-metrics
  
  events:
    - pull_request_opened
    - release_created
    - tag_pushed

capabilities:
  - feature_planning
  - release_management
  - quality_assurance
  - documentation_generation
  - deployment_readiness

rules:
  - id: release-readiness-check
    name: ãƒªãƒªãƒ¼ã‚¹æº–å‚™ç¢ºèª
    description: ãƒªãƒªãƒ¼ã‚¹å‰ã®å¿…é ˆãƒã‚§ãƒƒã‚¯é …ç›®ã‚’æ¤œè¨¼
    severity: critical
    checks:
      - name: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
        threshold: 80
        command: "pytest --cov=. --cov-report=term"
        
      - name: E2Eãƒ†ã‚¹ãƒˆ
        required: true
        command: "npm run test:e2e"
        
      - name: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»
        command: "npm audit && pip-audit"
        
      - name: ãƒ“ãƒ«ãƒ‰æ¤œè¨¼
        command: "npm run build && docker-compose build"
        
      - name: ç’°å¢ƒå¤‰æ•°ç¢ºèª
        files:
          - .env.example
          - docker-compose.yml
          
      - name: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª
        command: "alembic check"
        
      - name: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
        files:
          - openapi.json
          - README.md
          
  - id: qa-comprehensive
    name: ç·åˆQAãƒã‚§ãƒƒã‚¯
    description: åŒ…æ‹¬çš„ãªå“è³ªä¿è¨¼
    severity: high
    checks:
      - name: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
        command: "k6 run tests/performance/*.js"
        
      - name: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç›£æŸ»
        command: "npm run test:a11y"
        
      - name: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æ¤œè¨¼
        viewports:
          - mobile: 375x667
          - tablet: 768x1024
          - desktop: 1920x1080
          
  - id: product-metrics
    name: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹
    description: ã‚³ãƒ¼ãƒ‰å“è³ªã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ˜ãƒ«ã‚¹ã®å¯è¦–åŒ–
    checks:
      - name: ã‚³ãƒ¼ãƒ‰è¤‡é›‘åº¦
        command: "radon cc backend/app -a"
        
      - name: é‡è¤‡ã‚³ãƒ¼ãƒ‰æ¤œå‡º
        command: "radon raw backend/app"
        
      - name: ãƒã‚°ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
        source: github_issues
        
      - name: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒˆãƒ¬ãƒ³ãƒ‰
        history_days: 30

actions:
  on_success:
    - generate_release_notes
    - update_changelog
    - notify_team
    
  on_failure:
    - create_issue
    - block_merge
    - notify_maintainers

outputs:
  format: markdown
  sections:
    - summary
    - detailed_findings
    - action_items
    - metrics_dashboard
    
reports:
  - name: Release Readiness Report
    template: |
      # ğŸš€ ãƒªãƒªãƒ¼ã‚¹æº–å‚™ãƒ¬ãƒãƒ¼ãƒˆ
      
      ## âœ… å®Ÿè¡Œæ¸ˆã¿ãƒã‚§ãƒƒã‚¯
      {checks_summary}
      
      ## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹
      - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: {coverage}%
      - E2Eãƒ†ã‚¹ãƒˆ: {e2e_status}
      - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»: {security_status}
      - ãƒ“ãƒ«ãƒ‰: {build_status}
      
      ## âš ï¸ æ³¨æ„äº‹é …
      {warnings}
      
      ## ğŸ”´ ãƒ–ãƒ­ãƒƒã‚«ãƒ¼
      {blockers}
      
      ## âœ¨ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
      {next_steps}

[mypy]
python_version = 3.11
warn_return_any = False
warn_unused_configs = True
no_implicit_optional = True
strict_optional = True

# Ignore missing imports for third-party libraries without type stubs
ignore_missing_imports = True

# Strict type checking
disallow_untyped_defs = False
check_untyped_defs = True
warn_redundant_casts = True
warn_unused_ignores = False
warn_no_return = True
warn_unreachable = True

# Disable specific error codes that are too noisy due to missing type stubs or integration complexity
# assignment: SQLAlchemy Column type assignment issues
# arg-type: SQLAlchemy Column type argument issues
# attr-defined: Missing attributes in third-party libraries
# call-overload: Overload matching issues with SQLAlchemy
disable_error_code = no-any-return,union-attr,misc,unreachable,assignment,arg-type,attr-defined,call-overload

# Exclude certain directories and files
exclude = (alembic|tests|scripts|setup_teams_webhook\.py|test_teams.*\.py|create.*\.py|check.*\.py)

# Per-file ignores for complex integration code
[mypy-app.integrations.google_analytics.measurement_protocol]
disable_error_code = assignment,arg-type

[mypy-app.integrations.microsoft.teams_client]
disable_error_code = assignment,arg-type
